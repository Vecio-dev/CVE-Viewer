/** @type {import('./$types').PageLoad} */
export async function load({ fetch }) {
    let currentGmt = new Date();
    let lastWeekGmt = new Date(currentGmt.getTime() - (7 * 24 * 60 * 60 * 1000));

    let currentGmtString = currentGmt.toISOString();
    let lastWeekGmtString = lastWeekGmt.toISOString();


    const res = await fetch(`https://services.nvd.nist.gov/rest/json/cves/2.0/?pubStartDate=${lastWeekGmtString}&pubEndDate=${currentGmtString}&resultsPerPage=30`);
    const data = res.json();

	return data ;
}