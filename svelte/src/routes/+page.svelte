<script>
    import Navbar from "$lib/navbar.svelte";
    import CVE_Preview from "$lib/cve-preview.svelte";

    import "../app.css";

    /** @type {import('./$types').PageData} */
	export let data;

    export function getCVSSMetric(metrics) {
        if (metrics.cvssMetricV30) return metrics.cvssMetricV30;
        else if (metrics.cvssMetricV31) return metrics.cvssMetricV31;
        else return null;
    }
</script>

<div class="body bg-my_zinc_600 flex flex-col min-h-screen">
    <div class="flex-grow">
        <div class="Frame1 w-[1920px] relative">
    
            <!-- NAVBAR -->
            <Navbar />
      
            <!-- SEARCH BAR -->
            <div class="Barra2Group w-[1800px] h-[92px] left-[60px] top-[170px] absolute">
                <div class="Barra2 w-[1800px] h-[92px] left-0 top-0 absolute bg-my_neutral_700 rounded-[44px] shadow"></div>
                <div class="Rectangle13 w-[405px] h-[70px] left-[12px] top-[11px] absolute bg-my_zinc_700 rounded-[44px]"></div>
                <div class="Search w-[175px] h-[42px] left-[50px] top-[14px] absolute text-my_gray_400 text-[40px] font-bold font-['Kaisei Opti']"><input placeholder="Search..." style="all: unset; width: 340px;"></div>
            </div>
      
            <!-- CVE LIST -->
            <div class="Group6 grid grid-cols-3 gap-y-[50px] w-[1800px] h-auto left-[60px] top-[378px] relative">
                { #each data.vulnerabilities as elem }
                    <CVE_Preview id={elem.cve.id} description={elem.cve.descriptions[0].value} score={getCVSSMetric(elem.cve.metrics)[0].cvssData.baseScore} />
                { /each }
            </div>
        </div>
    </div>
    <div class="h-[500px]"></div>
</div>

<style>
</style>
